<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Amos Apreku">
<meta name="dcterms.date" content="2024-12-20">

<title>Trends in COVID-19 Cases, Deaths, and Hospitalizations Across States and Waves in the U.S</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="final-project_files/libs/clipboard/clipboard.min.js"></script>
<script src="final-project_files/libs/quarto-html/quarto.js"></script>
<script src="final-project_files/libs/quarto-html/popper.min.js"></script>
<script src="final-project_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="final-project_files/libs/quarto-html/anchor.min.js"></script>
<link href="final-project_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="final-project_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="final-project_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="final-project_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="final-project_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="final-project_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="final-project_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="final-project_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="final-project_files/libs/datatables-binding-0.33/datatables.js"></script>
<script src="final-project_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="final-project_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="final-project_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="final-project_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="final-project_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="final-project_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract">Abstract</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a>
  <ul class="collapse">
  <li><a href="#public-health-implications" id="toc-public-health-implications" class="nav-link" data-scroll-target="#public-health-implications">Public Health Implications</a></li>
  <li><a href="#limitation-and-strength" id="toc-limitation-and-strength" class="nav-link" data-scroll-target="#limitation-and-strength">Limitation and Strength</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Trends in COVID-19 Cases, Deaths, and Hospitalizations Across States and Waves in the U.S</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Amos Apreku </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 20, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="abstract" class="level1">
<h1>Abstract</h1>
<div style="text-align: justify;">
<p>The COVID-19 pandemic’s death rates, number of cases, and hospitalizations tell different stories in different dynamics due to the vaccination rollout, human behavior introduction of new variants, and interventions done by the health ministries. This paper uses weekly COVID-19 data from January 2020 to December 2024 to investigates trends in population-adjusted death rates by state and region, evaluates the pandemic’s evolving virulence, and identifies states that performed better or worse during each wave. Our analysis reveals that there is a lot of variation across the regions with the Mountain States, Midwest and Mid-Atlantic regions having the highest rate of deaths during the early waves in 2020 and 2021. Delta and the Omicron variants had the least case fatality rate, this could be vaccination availability and better treatment was widely available to the people. Vermont, Hawaii and Alaska had a lower death to Mississippi, West Virginia and South Dakota which consistently struggled. There was sharp decline in deaths to cases ratio over the years owing to vaccination, education and the government interventions. These results highlight the importance of timely interventions, regional public health strategies, and ongoing surveillance in mitigating the pandemic’s impact and guiding future responses to emerging infectious threats.</p>
</div>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<div style="text-align: justify;">
<p>The COVID-19 pandemic, caused by SARS-CoV-2, has profoundly impacted global health systems and economies since its emergence in late 2019. As of December 2024, there have been over <strong>7</strong>00 million confirmed cases and nearly 7 million deaths worldwide [1]. The outbreak has also led to numerous lockdowns which forced many patients to be hospitalized risking the economy and trading of certain countries. New variants do appear to change the course of infections and mortality with the adapting nature of the COVID pandemic, regardless of the fact there are vaccines and improved medicines available to the patients.</p>
<p>The United States has been on the receiving end of the pandemic the most with over 100 million reported cases and around 1.1 million deaths around the world from the onset of the pandemic.[2], [3]. The CDC’s COVID-NET systems also report that they managed to survey around 40,761 of Covid-19 associated hospitalizations between October 2023 and April 2024 with 95.4% of them being within the age of 18 or above. Vaccination has played an important role in managing the elderly population however still 48.6% of the total hospitalizations are still among individuals aged 75 and above which does indicate that numerous resources are still to be conquered.[4], [5].</p>
<p>Studies from other countries reported similar challenges. For instance, in Brazil, the mortality of Covid-19 at the East Region in the first year of the pandemic was 116.2 per hundred thousand inhabitants which translates into 66358 deaths[6]. India experienced severe waves in 2020 and 2021, with COVID-19 contributing to 29% of deaths between June 2020 and July 2021, totaling an estimated 3.2 million deaths[7]. South Africa experienced lower morbidity and mortality because of the Omicron variant, however the hospitals were still under great pressure.[8]. These findings reflect the global variability in COVID-19 outcomes and highlight the need for detailed, region-specific analyses to inform public health strategies.</p>
<p>Despite extensive research on COVID-19, mostly focused on short term trends, there is still limited research that has incorporate population data beyond 2022, which is important is assessing mortality rate in the later part of the pandemic and how these varies across different state and region in the U.S. There is limited understanding of how mortality and virulence have evolved across distinct pandemic waves and how outcomes varied by state. The relationship between mortality trends, vaccination programs, the emergence of new variants such as Delta and Omicron, and improvements in clinical treatments remains poorly understood.</p>
<p>Understanding how COVID-19 altered over time in terms of virulence is crucial for understanding how the circumstances may be handled in future. To address these gaps, this study conducts a comprehensive analysis of mortality, hospitalization, and case data segmented into distinct waves from January 2020 to December 2024. By assessing population-adjusted death rates by region and state and visualizing trends over time, this study provides insights into the pandemic’s progression, regional disparities, and the effectiveness of public health interventions.</p>
<p>The aim of this paper is (1) to classify the pandemic period into separate waves, and recognize the rationale behind such classifications through graphical illustrations, (2) compute death rates by state for each wave and identify states that performed better or worse, and (3) ) assess variations in COVID-19 virulence over time. This analysis will guide public health policy and preparedness for future pandemics by examining the dynamics and variations of COVID-19 effects within the United States region.</p>
</div>
</section>
<section id="methods" class="level1">
<h1>Methods</h1>
<div style="text-align: justify;">
<section id="study-design" class="level2">
<h2 class="anchored" data-anchor-id="study-design">Study Design</h2>
<p>This retrospective, cross-sectional study analyzed COVID-19 cases, deaths, hospitalizations, and vaccination rates across all 50 states and Puerto Rico and Washington, D.C., in the United States from January 2021 to December 2024. The datasets that were used were from sources that are published to the public and hence available for use in the study.</p>
</section>
<section id="data-source-and-collection" class="level2">
<h2 class="anchored" data-anchor-id="data-source-and-collection">Data Source and Collection</h2>
<p>U.S. COVID-19 Cases and Deaths by State database available at the CDC (2024) was used to derive COVID- 19 case data. Hospitalization metrics are reflected in the CDC report, COVID-19 Reported Patient Impact and Hospital Capacity by State (CDC, 2024). The counts of mortality data were obtained from the CDC Provisional COVID-19 Death Count by State (2024). CDC COVID-19 Vaccinations in the United States dataset available in the CDC (2024) provided the vaccination data. Population estimates for the years 2021, 2022, 2023 and 2024 were sourced from the US Census Bureau’s population estimates program (US Census Bureau, 2021 to 2023).</p>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>
</section>
<section id="study-settings-and-sample-size" class="level2">
<h2 class="anchored" data-anchor-id="study-settings-and-sample-size">Study Settings and Sample Size</h2>
<p>The study included all 50 states and Puerto Rico and Washington, D.C., representing diverse geographic regions and populations within the United States. The total U.S. population analyzed was approximately 332 million as of 2023 (U.S. Census Bureau, 2023). Weekly aggregated data were collected for each state, capturing trends in cases, hospitalizations, deaths, and vaccinations. Each state’s data were analyzed individually and compared regionally to identify disparities and patterns in COVID-19 outcomes. Data were processed over the full pandemic period, from the beginning of 2021 to December 2024.</p>
</section>
<section id="data-processing-and-wrangling" class="level2">
<h2 class="anchored" data-anchor-id="data-processing-and-wrangling">Data Processing and Wrangling</h2>
<p>Data wrangling and analysis were conducted in R (v4.3) with libraries such as httr2, tidyr, dplyr, and others. Publicly available GitHub datasets provided U.S. state-region mappings, and 2024 population estimates were derived using the previous four years’ averages. State-wise weekly COVID-19 cases were aggregated and cleaned for analysis. The pandemic was segmented into five waves: Wave 1 (Jan–Jun 2020) marked the initial outbreak, Wave 2 (Jul 2020–Feb 2021) saw surges linked to reopening and holiday gatherings, Wave 3 (Mar–Dec 2021) was driven by the Delta variant, Wave 4 (Jan–Jun 2022) by the Omicron variant, and Wave 5 (Jul 2022–Dec 2024) reflected reduced mortality due to vaccinations and improved treatments. Hospitalization data were matched to state population records, while death counts distinguished COVID-19-related from non-COVID-19-related mortality. This structured approach facilitated an in-depth analysis of pandemic trends across time and regions.</p>
<section id="variables" class="level3" style="text-align: justify;">
<h3 class="anchored" data-anchor-id="variables">Variables</h3>
<p>The final data sets included in this analysis was 13,260 observations and 13 variables, weekly data spanning from 25th January 2020 - 7th December 2024. Details of all the variables included in this data is in <strong>supplementary methods</strong></p>
</section>
<section id="missing-data" class="level3">
<h3 class="anchored" data-anchor-id="missing-data">Missing Data</h3>
<p>Missing data was prevalent across several key variables, including COVID-19 cases, hospitalizations, deaths, and vaccination rates. An analysis of the missing data revealed significant gaps, particularly in vaccination and mortality datasets. The missing cases variable showed 4,264 missing entries, while hospitalizations had 3,122 missing records. Deaths data exhibited 3,101 missing values, and vaccination completion rates (series_complete) had the highest number of missing entries at 6,708. A detailed examination suggests that the missing data were completely at random (MCAR), meaning the probability of a missing value does not depend on the observed or unobserved data. This assumption permits the analysis to proceed without introducing systematic bias. The primary reasons for these missing data points include changes in public health priorities, reduced frequency of reporting, and the discontinuation of certain data collection programs after widespread vaccination</p>
</section>
</section>
<section id="statistical-analysis" class="level2">
<h2 class="anchored" data-anchor-id="statistical-analysis">Statistical Analysis</h2>
<p>Descriptive analyses were conducted to summarize key metrics, including COVID-19 cases, deaths, hospitalizations, and vaccination rates, stratified by state and region. Weekly trends were analyzed to identify temporal patterns across distinct waves of the pandemic. These waves were defined using significant peaks in mortality data. Regional disparities in outcomes were assessed to evaluate the geographic variability of pandemic severity. Visualization of temporal and regional trends was conducted using ggplot2, and interactive tabular results were presented using kableExtra for clarity. Statistical analyses were performed in R (version 4.4.1)</p>
</section>
<section id="data-collection-and-management" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-and-management">Data Collection and Management</h2>
<p>All datasets were stored securely, and data cleaning was conducted concurrently with data processing to ensure accuracy and reproducibility. Data were aggregated at the state level, with no individual-level identifiers included, ensuring confidentiality and privacy. Data visualizations, including time series plots, heat maps, line graphs, were produced to highlight trends in COVID-19 outcomes. The study relied on publicly available data, and therefore, ethical approval was not required. Potential limitations include missing data, and incomplete reporting during specific periods, which may have influenced the findings..</p>
</section>
</div>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="final-project_files/figure-html/plot-waves-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Figure 1: Weekly COVID-19 deaths over time with wave markers. Vertical red dashed lines indicate the boundaries between distinct waves (Jan 2020 – Dec 2024).</figcaption>
</figure>
</div>
</div>
</div>
<div style="text-align: justify;">
<p>The figure above shows the weekly COVID-19 mortality trends in the United States from January 2020 to December 2024, divided into five distinct waves. Wave 1 (January 2020 – June 2020) marks the initial surge in deaths. Wave 2 (July 2020 – February 2021) experienced the highest mortality peak due to widespread reopening and holiday gatherings. Wave 3 (March 2021 – December 2021) saw deaths rise again, driven by the Delta variant. Wave 4 (January 2022 – June 2022) displayed a sharp but brief mortality spike caused by the Omicron variant. Wave 5 (July 2022 – December 2024) shows a sustained decline in deaths, reflecting the impact of vaccination, therapeutics, and population immunity.<strong>(Figure1)</strong></p>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="final-project_files/figure-html/plot-top-bottom-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Figure 2: Top 5 and Bottom 5 States by COVID-19 Death Rate per 100,000 Population Across Waves</figcaption>
</figure>
</div>
</div>
</div>
<div style="text-align: justify;">
<p>The above figure shows significant state-level variations in COVID-19 death rates across the five waves. In Wave 1, Northeastern states like New Jersey and Connecticut had the highest death rates, while Hawaii and Alaska had the lowest. Wave 2 saw peaks in South Dakota, Arizona, and Mississippi, while Vermont and Hawaii fared better. The Delta-driven Wave 3 affected Florida and Mississippi severely, while Vermont and Puerto Rico experienced lower mortality. In Wave 4, Mississippi and Oklahoma recorded high death rates, while Vermont and Hawaii had lower rates. By Wave 5, mortality decreased, but Mississippi and West Virginia still faced elevated rates, underscoring persistent regional disparities.<strong>(Figure 2)</strong></p>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="final-project_files/figure-html/plot-cases-deaths-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Figure 3: Weekly COVID-19 Cases and Deaths Over Time</figcaption>
</figure>
</div>
</div>
</div>
<div style="text-align: justify;">
<p>The above figure reveals weekly trends in COVID-19 cases and deaths from January 2020 to December 2024. Early in the pandemic (Wave 1), deaths were high relative to cases due to initial virulence and healthcare challenges. In Waves 2 and 3, cases and deaths surged with the Delta variant. The Omicron-driven Wave 4 saw over 4 million weekly cases, but deaths did not rise proportionally due to vaccination and reduced virulence. By Wave 5, cases declined significantly, while deaths fluctuated among vulnerable populations. The overall trend shows decreasing COVID-19 virulence over time. <strong>(Figure 3)</strong></p>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="final-project_files/figure-html/plot-trends-covid-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Figure 4: Trends in COVID-19 Cases, Hospitalizations, and Deaths per 100,000</figcaption>
</figure>
</div>
</div>
</div>
<div style="text-align: justify;">
<p>The figure above shows regional trends in COVID-19 cases, hospitalizations, and deaths per 100,000 people. The Mountain States, Midwest, and Mid-Atlantic regions had major case surges during the Delta and Omicron waves. Death rates followed similar patterns, with the Midwest and Mountain States experiencing high mortality in late 2020 and 2021. Hospitalization rates were elevated in the Mid-Atlantic and Mountain States during major waves, particularly during the Omicron surge. Post-2022, case, death, and hospitalization rates declined, reflecting the impact of vaccination and improved clinical management. <strong>(Figure 4)</strong></p>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-2a9821e5a7155f146fe0" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2a9821e5a7155f146fe0">{"x":{"filter":"none","vertical":false,"caption":"<caption>Table 1: COVID-19 Total Cases, Deaths, Hospitalizations, and Rates by State<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52"],["Alaska","Rhode Island","Kentucky","North Dakota","West Virginia","Tennessee","South Carolina","Puerto Rico","Wisconsin","Florida","Louisiana","Mississippi","Arizona","New Jersey","Delaware","North Carolina","Alabama","Arkansas","Illinois","Oklahoma","Utah","Kansas","Massachusetts","New Mexico","Wyoming","California","Minnesota","South Dakota","Michigan","Colorado","Indiana","Montana","Nebraska","Ohio","Missouri","Texas","Georgia","Iowa","Nevada","Pennsylvania","Connecticut","Idaho","New Hampshire","District of Columbia","Virginia","Hawaii","Washington","Vermont","Maine","Oregon","Maryland","New York"],[297588,441466,1743117,291093,650556,2542163,1852019,1122076,2030717,7572282,1566171,1000415,2451004,3075271,333772,3501404,1659936,995043,4136659,1306350,1097475,945923,2242176,681242,187034,12251820,1795771,282895,3106362,1783663,2076326,333959,575134,3441458,1790763,8508204,3080929,908936,898164,3559331,982335,526118,382013,178904,2310846,374264,1957759,154243,322982,975856,1379385,3572043],[1066,3641,21936,2605,8621,32182,21979,6885,18018,86809,18346,15791,31618,37375,3049,37036,22441,13083,40821,19548,5769,10418,22699,9103,1454,115326,16543,3031,39289,16228,28472,3563,5809,52592,24614,108446,38284,11516,12504,56413,13040,5464,2791,1803,24954,1474,16432,447,3079,9945,19494,45110],[10553,14945,165575,16657,47718,142017,104351,32013,137940,610281,103105,59403,165278,192382,22056,185179,128837,73224,254531,117246,51431,62167,119380,41362,12198,674498,87985,21397,211790,106829,151659,32324,35319,284963,144374,642929,256882,59833,68699,270480,72554,30883,20544,18098,138398,22461,85807,7354,17137,52436,105562,422486],[159,158,151,146,144,142,138,136,135,134,133,133,131,130,129,129,128,128,128,128,128,126,126,126,126,123,123,123,121,120,119,117,115,115,114,112,111,111,111,108,107,107,107,104,104,102,99,94,92,90,88,71],[1,1,2,1,2,2,2,1,1,2,2,2,2,2,1,1,2,2,1,2,1,1,1,2,1,1,1,1,2,1,2,1,1,2,2,1,1,1,2,2,1,1,1,1,1,0,1,0,1,1,1,1],[6,5,14,8,11,8,8,4,9,11,9,8,9,8,9,7,10,9,8,11,6,8,7,8,8,7,6,9,8,7,9,11,7,9,9,8,9,7,9,8,8,6,6,10,6,6,4,4,5,5,7,8]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>State<\/th>\n      <th>Total Cases<\/th>\n      <th>Total Deaths<\/th>\n      <th>Total Hospitalizations<\/th>\n      <th>Case Rate (per 100k)<\/th>\n      <th>Death Rate (per 100k)<\/th>\n      <th>Hospitalization Rate (per 100k)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"state_name","targets":1},{"name":"total_cases","targets":2},{"name":"total_deaths","targets":3},{"name":"total_hosp","targets":4},{"name":"case_rate","targets":5},{"name":"death_rate","targets":6},{"name":"hosp_rate","targets":7}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div style="text-align: justify;">
<p>The table above provides a state-level breakdown of COVID-19 severity metrics. Alaska (159 per 100k), Rhode Island (158 per 100k), and Kentucky (151 per 100k) recorded the highest case rates. Despite high case rates, death rates remained low (1-2 per 100k) across most states. Hospitalization rates varied, with Kentucky (14 per 100k) and West Virginia (11 per 100k) indicating higher healthcare strain. States like Hawaii (102 per 100k) and Vermont (94 per 100k) reported lower case and hospitalization rates, reflecting effective mitigation efforts. <strong>(Table 1)</strong></p>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-cc45067eae1a2ed388df" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-cc45067eae1a2ed388df">{"x":{"filter":"none","vertical":false,"caption":"<caption>Table 2: COVID-19 Total Cases, Deaths, Hospitalizations, and Rates by Region<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10"],["Southeast","Mountain States","Midwest","Pacific","New England","South Central","Central Plains","Mid-Atlantic","Pacific Northwest","NY/NJ/PR/VI"],[22952265,3976119,16587293,15975252,4525215,13057010,4220756,8412794,3757321,7769390],[276458,32650,195735,160922,45697,168526,52357,114334,32907,89370],[1652525,240836,1128868,930936,251914,977866,301693,602312,179679,646881],[131,124,123,123,117,117,116,105,100,94],[2,1,1,1,1,2,1,1,1,1],[9,8,8,7,7,9,8,8,5,8]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Region<\/th>\n      <th>Total Cases<\/th>\n      <th>Total Deaths<\/th>\n      <th>Total Hospitalizations<\/th>\n      <th>Case Rate (per 100k)<\/th>\n      <th>Death Rate (per 100k)<\/th>\n      <th>Hospitalization Rate (per 100k)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"region_name","targets":1},{"name":"total_cases","targets":2},{"name":"total_deaths","targets":3},{"name":"total_hosp","targets":4},{"name":"case_rate","targets":5},{"name":"death_rate","targets":6},{"name":"hosp_rate","targets":7}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div style="text-align: justify;">
<p>The table above shows regional disparities in COVID-19 outcomes. The Southeast reported the highest total cases (22,952,265) and deaths (276,363), with a case rate of 131 per 100k and a death rate of 2 per 100k. The Mountain States (124 per 100k) and Midwest (123 per 100k) had elevated case rates. The Pacific Northwest and NY/NJ/PR/VI regions recorded the lowest case rates (100 and 94 per 100k, respectively). Hospitalization rates were highest in the Southeast and South Central regions (9 per 100k). These findings emphasize the need for region-specific public health strategies to address pandemic severity. <strong>(Table 2)</strong></p>
</div>
</section>
<section id="discussion" class="level1">
<h1>Discussion</h1>
<div style="text-align: justify;">
<p>This study examines the progression of COVID-19 deaths, cases, and hospitalizations in the United States over five waves from January 2020 to December 2024. Our results show significant differences in outcomes across states, regions, and time periods, highlighting how complex and uneven the pandemic’s impact has been.</p>
<p>Our analysis of weekly deaths (Figure 1) shows five distinct waves. The first wave (January–June 2020) marked the initial outbreak, with high death rates in the Northeast due to unprepared hospitals and delayed public health actions[9], [10]. The second wave (July 2020–February 2021) had the highest number of deaths, likely due to relaxed restrictions, holiday gatherings, and increased virus spread in the Midwest and South[11]</p>
<p>The third wave (March–December 2021) was driven by the Delta variant, known for being more contagious and severe[12], [13]. In the fourth wave (January–June 2022), the Omicron variant spread quickly, causing many infections but fewer deaths compared to Delta. This pattern matched findings in South Africa and the UK, where Omicron caused less severe illness[14], [15]. In the fifth wave (July 2022–December 2024), deaths continued to decline, thanks to widespread vaccination, better treatments, and growing immunity in the population[16].</p>
<p>Our findings reveal that death rates varied greatly between states and regions (Figure 2, Table 1, Table 2). During the first wave, states in the Northeast like New Jersey and Massachusetts had the highest death rates These areas had high population density and hospitals that were quickly overwhelmed. In contrast, states like Hawaii, Alaska, and Wyoming had lower death rates due to effective public health measures and smaller populations.[17].</p>
<p>COVID-19 mortality rates have been disproportionately higher in the Southern United States compared to other regions. Since May 31, 2020, the South experienced COVID-19 mortality 26% higher than the national rate, while the Northeast’s rate was 42% lower. The South has accounted for 48% of COVID-19 deaths while making up only 38% of the population. Factors contributing to these regional disparities include behavioral differences, policy implementation, higher rates of pre-existing conditions in rural areas, inadequate healthcare access, and lower vaccination rates in rural counties[18].</p>
<p>Figure 3 shows how cases, hospitalizations, and deaths changed over time. In the first wave, the death rate appeared high due to limited testing and unprepared healthcare systems[19].. The Omicron wave saw a surge in cases, but lower mortality rates compared to Delta, with studies showing a mortality risk ratio of 1.671 between Delta and Omicron variants[20]. This reduced mortality during Omicron was likely due to widespread vaccination, natural immunity, and potentially lower virulence of the variant23. By later waves, both cases and hospitalizations decreased, reflecting the cumulative impact of vaccines and public health measures.</p>
<p>Figure 4 highlights differences in cases and hospitalizations by region. Mountain States, Midwest, and Mid-Atlantic regions experienced significant case spikes during the Delta and Omicron waves[21].&nbsp; Southeast and South-Central regions, particularly the East South-Central region, had higher hospitalization rates, possibly due to higher chronic disease prevalence and lower vaccination coverage. Vermont and Hawaii maintained lower hospitalization and fatality rates[22].</p>
</div>
<section id="public-health-implications" class="level2">
<h2 class="anchored" data-anchor-id="public-health-implications">Public Health Implications</h2>
<div style="text-align: justify;">
<p>Our results show the complex relationship between the virus, public health measures, and immunity. Southern and Midwestern states, which had higher death rates, need focused efforts to improve healthcare access and increase vaccination. The decline in deaths during the fifth wave highlights the importance of vaccination and new treatments in controlling the virus Continued monitoring and flexible public health policies are essential to address regional challenges.</p>
</div>
</section>
<section id="limitation-and-strength" class="level2">
<h2 class="anchored" data-anchor-id="limitation-and-strength">Limitation and Strength</h2>
<div style="text-align: justify;">
<p>This study’s strengths include analyzing COVID-19 trends over a long period and comparing data across states and regions. However, there are some limitations, such as possible underreporting of deaths and missing data on social factors and pre-existing conditions. These challenges have been noted in other studies. Future research should explore how these factors affected the pandemic’s outcomes.</p>
</div>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<div style="text-align: justify;">
<p>The COVID-19 pandemic had a varied and widespread impact in the United States. Our study shows clear differences in deaths, cases, and hospitalizations over time and across regions. Public health measures, healthcare capacity, and vaccination played key roles in reducing severe outcomes. These findings can help guide strategies for future pandemics and address regional health disparities.</p>
</div>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<div style="text-align: justify;">
<p>[1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “COVID-19 epidemiological update – 15 July 2024.” Accessed: Dec.&nbsp;16, 2024. [Online]. Available: https://www.who.int/publications/m/item/covid-19-epidemiological-update-edition-169</p>
<p>[2]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “Provisional COVID-19 Mortality Surveillance.” Accessed: Dec.&nbsp;16, 2024. [Online]. Available: https://www.cdc.gov/nchs/nvss/vsrr/covid19/index.htm</p>
<p>[3]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “COVID-19 Death Data and Resources - National Vital Statistics System.” Accessed: Dec.&nbsp;16, 2024. [Online]. Available: https://www.cdc.gov/nchs/nvss/covid-19.htm</p>
<p>[4]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C. A. Taylor <em>et al.</em>, “COVID-19–Associated Hospitalizations Among U.S. Adults Aged ≥18 Years — COVID-NET, 12 States, October 2023–April 2024,” 2024. [Online]. Available: https://www.cdc.gov/covidvaxview/weekly-dashboard/adult-vaccination-</p>
<p>[5]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C. A. Taylor <em>et al.</em>, “COVID-19–Associated Hospitalizations Among U.S. Adults Aged ≥18 Years — COVID-NET, 12 States, October 2023–April 2024,” <em>MMWR Morb Mortal Wkly Rep</em>, vol.&nbsp;73, no. 39, pp.&nbsp;869–875, Oct.&nbsp;2024, doi: 10.15585/MMWR.MM7339A2.</p>
<p>[6]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; L. A. Andrade <em>et al.</em>, “Spatiotemporal Pattern of COVID-19–Related Mortality during the First Year of the Pandemic in Brazil: A Population-based Study in a Region of High Social Vulnerability,” <em>Am J Trop Med Hyg</em>, vol.&nbsp;106, no. 1, p.&nbsp;132, Jan.&nbsp;2021, doi: 10.4269/AJTMH.21-0744.</p>
<p>[7]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; P. Jha <em>et al.</em>, “COVID mortality in India: National survey data and health facility deaths,” <em>Science</em>, vol.&nbsp;375, no. 6581, p.&nbsp;667, Feb.&nbsp;2022, doi: 10.1126/SCIENCE.ABM5154.</p>
<p>[8]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C. Maslo, R. Friedland, M. Toubkin, A. Laubscher, T. Akaloo, and B. Kama, “Characteristics and Outcomes of Hospitalized Patients in South Africa During the COVID-19 Omicron Wave Compared With Previous Waves,” <em>JAMA</em>, vol.&nbsp;327, no. 6, p.&nbsp;583, Feb.&nbsp;2021, doi: 10.1001/JAMA.2021.24868.</p>
<p>[9]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; S. Richardson <em>et al.</em>, “Presenting Characteristics, Comorbidities, and Outcomes Among 5700 Patients Hospitalized With COVID-19 in the New York City Area,” <em>JAMA</em>, vol.&nbsp;323, no. 20, pp.&nbsp;2052–2059, May 2020, doi: 10.1001/JAMA.2020.6775.</p>
<p>[10]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “COVID-19: Latest Data - NYC Health.” Accessed: Dec.&nbsp;19, 2024. [Online]. Available: https://www.nyc.gov/site/doh/covid/covid-19-data.page</p>
<p>[11]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; S. H. Woolf, D. A. Chapman, R. T. Sabo, and E. B. Zimmerman, “Excess Deaths From COVID-19 and Other Causes in the US, March 1, 2020, to January 2, 2021,” <em>JAMA</em>, vol.&nbsp;325, no. 17, pp.&nbsp;1786–1789, May 2021, doi: 10.1001/JAMA.2021.5199.</p>
<p>[12]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D. S. La-Cruz Hernández, S. Isaac De La Cruz-Hernández, S. Isaac De La-Cruz Hernández, and G. Barrera-Badillo, “The Delta Variant Triggers the Third Wave of COVID-19 in Mexico,” <em>Disaster Med Public Health Prep</em>, p.&nbsp;1, Dec.&nbsp;2022, doi: 10.1017/DMP.2022.49.</p>
<p>[13]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; J. Fokam <em>et al.</em>, “Genomic surveillance of SARS-CoV-2 reveals highest severity and mortality of delta over other variants: evidence from Cameroon,” <em>Scientific Reports 2023 13:1</em>, vol.&nbsp;13, no. 1, pp.&nbsp;1–10, Dec.&nbsp;2023, doi: 10.1038/s41598-023-48773-3.</p>
<p>[14]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A. Sheikh <em>et al.</em>, “Severity of omicron variant of concern and effectiveness of vaccine boosters against symptomatic disease in Scotland (EAVE II): a national cohort study with nested test-negative design,” <em>Lancet Infect Dis</em>, vol.&nbsp;22, no. 7, p.&nbsp;959, Jul.&nbsp;2022, doi: 10.1016/S1473-3099(22)00141-4.</p>
<p>[15]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C. Maslo and M. Toubkin, “Characteristics and Outcomes of Hospitalized Patients in South Africa During the COVID-19 Omicron Wave—Reply,” <em>JAMA</em>, vol.&nbsp;327, no. 21, pp.&nbsp;2148–2148, Jun.&nbsp;2022, doi: 10.1001/JAMA.2022.5575.</p>
<p>[16]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “NVSS - Provisional Death Counts for COVID-19 - Executive Summary.” Accessed: Dec.&nbsp;19, 2024. [Online]. Available: https://www.cdc.gov/nchs/covid19/mortality-overview.htm</p>
<p>[17]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “The Lancet: Largest US state-by-state analysis of COVID-19 impact reveals the driving forces behind variations in health, education, and economic performance | Institute for Health Metrics and Evaluation.” Accessed: Dec.&nbsp;19, 2024. [Online]. Available: https://www.healthdata.org/news-events/newsroom/news-releases/lancet-largest-us-state-state-analysis-covid-19-impact-reveals</p>
<p>[18]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “Higher COVID-19 Death Rates in the Southern U.S. Due to Behavior Differences | School of Health | Georgetown University.” Accessed: Dec.&nbsp;19, 2024. [Online]. Available: https://health.georgetown.edu/news-story/higher-covid-19-death-rates-in-the-southern-u-s-due-to-behavior-differences/</p>
<p>[19]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; S. Vig <em>et al.</em>, “Mortality in Two Waves of COVID-19: A Comparative Analysis of a Tertiary Care Hospital in India,” <em>Cureus</em>, vol.&nbsp;15, no. 9, p.&nbsp;e45025, Sep.&nbsp;2023, doi: 10.7759/CUREUS.45025.</p>
<p>[20]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; J. X. Li, P. L. Liao, J. C. C. Wei, S. B. Hsu, and C. J. Yeh, “A chronological review of COVID-19 case fatality rate and its secular trend and investigation of all-cause mortality and hospitalization during the Delta and Omicron waves in the United States: a retrospective cohort study,” <em>Front Public Health</em>, vol.&nbsp;11, 2023, doi: 10.3389/FPUBH.2023.1143650.</p>
<p>[21]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “COVIDView Summary ending on October 17, 2020 | CDC.” Accessed: Dec.&nbsp;19, 2024. [Online]. Available: https://archive.cdc.gov/www_cdc_gov/coronavirus/2019-ncov/covid-data/covidview/past-reports/10232020.html</p>
<p>[22]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “VDH: COVID cases up, but serious cases remain low | Vermont Business Magazine.” Accessed: Dec.&nbsp;19, 2024. [Online]. Available: https://vermontbiz.com/news/2024/november/12/vdh-covid-cases-serious-cases-remain-low</p>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>